<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>5.2 Principios del Software de E/S</title>
    <link rel="icon" type="image/png" href="logoescom.png">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /*
        Aquí comienza un bloque de estilos CSS para definir la apariencia de la página.
        Incluye:
        - Variables de color (--primary, --secondary, etc.) para un diseño consistente.
        - Estilos base para todos los elementos (*).
        - Estilos para el cuerpo de la página (body), incluyendo un fondo degradado.
        - Diseño de componentes específicos como botones flotantes, menú lateral, contenedor principal,
          encabezados, secciones, tablas, bloques de código, tarjetas de actividad, pie de página, etc.
        - Media Queries (@media) para adaptar el diseño a pantallas más pequeñas (diseño responsivo).
        */
        :root {
            --primary: #2c3e50;
            --secondary: #3498db;
            --accent: #e74c3c;
            --light: #ecf0f1;
            --dark: #2c3e50;
            --gray: #95a5a6;
            --success: #2ecc71;
            --warning: #f39c12;
            --card-bg: rgba(255, 255, 255, 0.05);
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #1a2a3a, #2c3e50);
            color: var(--light);
            min-height: 100vh;
            line-height: 1.7;
        }

        /* Botón flotante de inicio */
        .floating-home-btn {
            position: fixed;
            top: 20px;
            right: 20px;
            background: var(--secondary);
            color: white;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            text-decoration: none;
            box-shadow: 0 4px 20px rgba(52, 152, 219, 0.3);
            transition: all 0.3s ease;
            z-index: 1000;
            font-size: 1.5rem;
        }

        .floating-home-btn:hover {
            background: #2980b9;
            transform: translateY(-3px);
            box-shadow: 0 6px 25px rgba(52, 152, 219, 0.4);
        }

        /* Menú de navegación lateral */
        .sidebar-nav {
            position: fixed;
            left: 0;
            top: 0;
            width: 280px;
            height: 100vh;
            background: rgba(0, 0, 0, 0.9);
            backdrop-filter: blur(10px);
            border-right: 1px solid rgba(255, 255, 255, 0.1);
            z-index: 999;
            transition: transform 0.3s ease;
            transform: translateX(-100%);
            overflow-y: auto;
        }

        .sidebar-nav.active {
            transform: translateX(0);
        }

        .sidebar-header {
            padding: 20px;
            background: rgba(52, 152, 219, 0.1);
            border-bottom: 1px solid rgba(52, 152, 219, 0.3);
        }

        .sidebar-title {
            font-size: 1.2rem;
            color: var(--secondary);
            font-weight: 600;
            margin-bottom: 5px;
        }

        .sidebar-subtitle {
            font-size: 0.9rem;
            color: var(--gray);
        }

        .nav-sections {
            padding: 20px 0;
        }

        .nav-section {
            margin-bottom: 15px;
        }

        .nav-section-title {
            padding: 10px 20px;
            font-size: 1rem;
            font-weight: 600;
            color: var(--secondary);
            border-bottom: 1px solid rgba(52, 152, 219, 0.2);
            margin-bottom: 10px;
        }

        .nav-item {
            display: block;
            padding: 12px 20px;
            color: var(--light);
            text-decoration: none;
            transition: all 0.3s ease;
            border-left: 3px solid transparent;
        }

        .nav-item:hover {
            background: rgba(52, 152, 219, 0.1);
            border-left-color: var(--secondary);
            padding-left: 25px;
        }

        .nav-item.active {
            background: rgba(52, 152, 219, 0.2);
            border-left-color: var(--secondary);
            color: var(--secondary);
        }

        .nav-item i {
            margin-right: 10px;
            width: 20px;
            text-align: center;
        }

        /* Botón toggle del menú */
        .menu-toggle {
            position: fixed;
            top: 20px;
            left: 20px;
            background: var(--primary);
            color: white;
            width: 50px;
            height: 50px;
            border-radius: 8px;
            border: none;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
            transition: all 0.3s ease;
            z-index: 1001;
            font-size: 1.2rem;
        }

        .menu-toggle:hover {
            background: var(--secondary);
            transform: translateY(-2px);
        }

        .menu-toggle.active {
            background: var(--accent);
        }

        /* Indicador de progreso de lectura */
        .reading-progress {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 4px;
            background: rgba(255, 255, 255, 0.1);
            z-index: 998;
        }

        .reading-progress-bar {
            height: 100%;
            background: linear-gradient(90deg, var(--secondary), var(--success));
            width: 0%;
            transition: width 0.1s ease;
        }

        /* Overlay para cerrar el menú */
        .sidebar-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 998;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }

        .sidebar-overlay.active {
            opacity: 1;
            visibility: visible;
        }
        
        /* Contenedor principal con espaciado para botones flotantes */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            transition: margin-left 0.3s ease, margin-right 0.3s ease;
        }
        
        header {
            text-align: center;
            padding: 40px 20px;
            margin-bottom: 30px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 15px;
            position: relative;
            overflow: hidden;
        }
        
        .breadcrumb {
            display: flex;
            justify-content: center;
            margin-bottom: 20px;
            color: var(--gray);
            font-size: 1.1rem;
        }
        
        .breadcrumb a {
            color: var(--secondary);
            text-decoration: none;
            transition: color 0.3s;
        }
        
        .breadcrumb a:hover {
            color: white;
            text-decoration: underline;
        }
        
        .breadcrumb span {
            margin: 0 10px;
        }
        
        h1 {
            font-size: 2.8rem;
            margin-bottom: 10px;
            color: white;
        }
        
        .subtitle {
            font-size: 1.8rem;
            color: var(--secondary);
            margin-bottom: 20px;
            font-weight: 300;
            text-align: center;
        }
        
        .intro {
            max-width: 900px;
            margin: 0 auto 40px;
            padding: 25px;
            background: var(--card-bg);
            border-radius: 15px;
            border-left: 4px solid var(--secondary);
            text-align: justify;
        }
        
        .section {
            background: var(--card-bg);
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 40px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            scroll-margin-top: 100px;
        }
        
        .section-header {
            display: flex;
            align-items: center;
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 2px solid var(--secondary);
        }
        
        .section-number {
            font-size: 2.2rem;
            font-weight: bold;
            color: var(--secondary);
            margin-right: 15px;
            min-width: 120px;
        }
        
        .section-title {
            font-size: 1.8rem;
            font-weight: 600;
            color: white;
        }
        
        .content {
            padding: 0 10px;
        }
        
        .content h3 {
            font-size: 1.5rem;
            color: var(--secondary);
            margin: 30px 0 15px;
            padding-left: 10px;
            border-left: 3px solid var(--accent);
        }
        
        .content h4 {
            font-size: 1.3rem;
            color: var(--warning);
            margin: 25px 0 12px;
            padding-left: 8px;
        }
        
        .content p {
            margin-bottom: 15px;
            text-align: justify;
        }
        
        .content ul, .content ol {
            padding-left: 30px;
            margin: 20px 0;
        }
        
        .content li {
            margin-bottom: 12px;
        }
        
        .highlight {
            background: rgba(231, 76, 60, 0.15);
            padding: 2px 6px;
            border-radius: 4px;
            font-weight: 500;
        }
        
        .citation {
            font-style: italic;
            color: var(--gray);
            margin: 5px 0 15px 20px;
            border-left: 2px solid var(--secondary);
            padding-left: 10px;
        }
        
        .table-container {
            max-width: 800px;
            margin: 30px auto;
            overflow-x: auto;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            background: rgba(0, 0, 0, 0.2);
        }
        
        th {
            background: var(--primary);
            color: white;
            padding: 15px;
            text-align: left;
            font-weight: 600;
        }
        
        td {
            padding: 12px 15px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        tr:nth-child(even) {
            background: rgba(255, 255, 255, 0.03);
        }
        
        .table-caption {
            text-align: center;
            padding: 10px;
            font-style: italic;
            color: var(--gray);
            background: rgba(0, 0, 0, 0.3);
            border-bottom-left-radius: 10px;
            border-bottom-right-radius: 10px;
        }
        
        .code-block {
            background: #1e1e1e;
            color: #dcdcdc;
            border-radius: 10px;
            padding: 20px;
            margin: 25px 0;
            overflow-x: auto;
            font-family: 'Courier New', monospace;
            position: relative;
            border-left: 4px solid var(--warning);
        }
        
        .code-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 15px;
            color: var(--gray);
            font-size: 0.9rem;
        }
        
        .code-caption {
            font-style: italic;
            margin-top: 10px;
            color: var(--gray);
            text-align: center;
        }
        
          .figure-container {
            text-align: center;
            margin: 30px 0;
            padding: 20px;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 10px;
        }
        
        .figure-placeholder {
            width: 100%;
            height: 300px;
            background: linear-gradient(135deg, #2c3e50, #34495e);
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 8px;
            margin: 15px 0;
            color: var(--gray);
            font-style: italic;
            flex-direction: column;

        }
        
        .figure-placeholder i {
            font-size: 3rem;
            margin-bottom: 15px;
            color: var(--secondary);
        }
        
        .figure-caption {
            font-style: italic;
            color: var(--gray);
            margin-top: 10px;
        }

        .imagen-figura2 {
            max-width: 200px;
            width: 100%;
            height: auto;
        }

        .imagen-figura3 {
            max-width: 200px;
            width: 100%;
            height: auto;
        }

        .imagen-figura4 {
            max-width: 200px;
            width: 100%;
            height: auto;
        }
        
        .activity-card {
            background: rgba(46, 204, 113, 0.1);
            border-radius: 15px;
            padding: 30px;
            margin: 40px 0;
            border-left: 4px solid var(--success);
            text-align: center;
        }
        
        .activity-title {
            font-size: 1.8rem;
            color: var(--success);
            margin-bottom: 20px;
        }
        
        .activity-btn {
            display: inline-block;
            background: var(--success);
            color: white;
            padding: 15px 35px;
            border-radius: 30px;
            text-decoration: none;
            font-weight: 600;
            margin-top: 15px;
            transition: all 0.3s ease;
            font-size: 1.1rem;
        }
        
        .activity-btn:hover {
            background: #27ae60;
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(46, 204, 113, 0.4);
        }
        
        .nav-buttons {
            display: flex;
            justify-content: space-between;
            margin-top: 40px;
        }
        
        .nav-btn {
            display: inline-flex;
            align-items: center;
            background: var(--secondary);
            color: white;
            padding: 12px 25px;
            border-radius: 30px;
            text-decoration: none;
            font-weight: 600;
            transition: all 0.3s ease;
        }
        
        .nav-btn:hover {
            background: #2980b9;
            transform: translateY(-3px);
        }
        
        .nav-btn i {
            margin: 0 8px;
        }
        
        footer {
            text-align: center;
            margin-top: 60px;
            padding: 30px;
            color: var(--gray);
            font-size: 0.9rem;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }

        /* Botón de ir arriba */
        .scroll-to-top {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: var(--accent);
            color: white;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            border: none;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 4px 15px rgba(231, 76, 60, 0.3);
            transition: all 0.3s ease;
            opacity: 0;
            visibility: hidden;
            z-index: 999;
        }

        .scroll-to-top.visible {
            opacity: 1;
            visibility: visible;
        }

        .scroll-to-top:hover {
            background: #c0392b;
            transform: translateY(-3px);
        }
        
        @media (max-width: 768px) {
            .sidebar-nav {
                width: 100%;
            }

            h1 {
                font-size: 2rem;
            }
            
            .subtitle {
                font-size: 1.4rem;
            }
            
            .section-title {
                font-size: 1.5rem;
            }
            
            .section-number {
                min-width: 100px;
                font-size: 1.8rem;
            }
            
            .nav-buttons {
                flex-direction: column;
                gap: 15px;
            }
            
            .nav-btn {
                width: 100%;
                text-align: center;
                justify-content: center;
            }

            .floating-home-btn {
                width: 50px;
                height: 50px;
                font-size: 1.2rem;
            }
        }
    </style>
</head>
<body>
    <!-- Indicador de progreso de lectura -->
    <div class="reading-progress">
        <div class="reading-progress-bar" id="progressBar"></div>
    </div>

    <!-- Botón toggle del menú -->
    <button class="menu-toggle" id="menuToggle">
        <i class="fas fa-bars"></i>
    </button>

    <!-- Botón flotante de inicio -->
    <a href="index.html" class="floating-home-btn" title="Ir al inicio">
        <i class="fas fa-home"></i>
    </a>

    <!-- Overlay para cerrar el menú -->
    <div class="sidebar-overlay" id="sidebarOverlay"></div>

    <!-- Menú de navegación lateral -->
    <nav class="sidebar-nav" id="sidebarNav">
        <div class="sidebar-header">
            <div class="sidebar-title">5.2 Software de E/S</div>
            <div class="sidebar-subtitle">Gestión eficiente de entrada y salida</div>
        </div>
        
        <div class="nav-sections">
            <div class="nav-section">
                <div class="nav-section-title">Navegación</div>
                <a href="#inicio" class="nav-item">
                    <i class="fas fa-home"></i>
                    Inicio de la unidad
                </a>
                <a href="index.html" class="nav-item">
                    <i class="fas fa-arrow-left"></i>
                    Menú principal
                </a>
            </div>

            <div class="nav-section">
                <div class="nav-section-title">Contenido</div>
                <a href="#introduccion" class="nav-item" data-section="introduccion">
                    <i class="fas fa-info-circle"></i>
                    Introducción General
                </a>
                <a href="#seccion-5-2-1" class="nav-item" data-section="5-2-1">
                    <i class="fas fa-bullseye"></i>
                    5.2.1 Objetivos del Software de E/S
                </a>
                <a href="#seccion-5-2-2" class="nav-item" data-section="5-2-2">
                    <i class="fas fa-code"></i>
                    5.2.2 E/S Programadas
                </a>
                <a href="#seccion-5-2-3" class="nav-item" data-section="5-2-3">
                    <i class="fas fa-bolt"></i>
                    5.2.3 E/S Manejadas por Interrupciones
                </a>
                <a href="#seccion-5-2-4" class="nav-item" data-section="5-2-4">
                    <i class="fas fa-memory"></i>
                    5.2.4 E/S usando DMA
                </a>
            </div>

            <div class="nav-section">
                <div class="nav-section-title">Recursos</div>
                <a href="actividad_5_2.html" class="nav-item">
                    <i class="fas fa-tasks"></i>
                    Actividad de aprendizaje
                </a>
                <a href="5.1.html" class="nav-item">
                    <i class="fas fa-arrow-left"></i>
                    Anterior: Hardware de E/S
                </a>
                <a href="5.3.html" class="nav-item">
                    <i class="fas fa-arrow-right"></i>
                    Siguiente: Capas de Software
                </a>
            </div>
        </div>
    </nav>

    <!-- Botón de ir arriba -->
    <button class="scroll-to-top" id="scrollToTop">
        <i class="fas fa-chevron-up"></i>
    </button>

    <div class="container">
        <header id="inicio">
            <div class="breadcrumb">
                <a href="index.html"><i class="fas fa-home"></i> Inicio</a>
                <span>/</span>
                <a href="index.html">Unidad 5</a>
                <span>/</span>
                <span>5.2 Principios del Software de E/S</span>
            </div>
            <h1>5.2 Principios del Software de E/S</h1>
            <div class="subtitle">Gestión eficiente de entrada y salida a nivel de software</div>
        </header>
        
        <!-- Introducción General -->
        <div class="section" id="introduccion">
            <div class="section-header">
                <div class="section-number">Introducción</div>
            </div>
            <div class="content">
                <p> Los<strong>principios del software de E/S</strong> establecen la forma en que el <strong>sistema operativo gestiona y coordina las operaciones de entrada y salida entre el hardware y los programas de usuario.</strong></p>


            </div>
        </div>
        
        <!-- Sección 5.2.1 -->
        <div class="section" id="seccion-5-2-1">
            <div class="section-header">
                <div class="section-number">5.2.1</div>
                <div class="section-title">Objetivos del Software de E/S</div>
            </div>
            <div class="content">
                <p>Es aquel que se encarga de controlar, administrar y atender el buen funcionamiento de todos los programas con relación al sistema operativo para que con ello todos los dispositivos físicos y programas funcionen adecuadamente y no exista problemas o interrupciones de fallo.</p>
                <h3>1. Independencia de los dispositivos</h3>
                    <p>Es la forma en que los dispositivos trabajan con los programas en donde comparten operaciones de lectura y escritura sin tener en cuenta quien lo esté generando.</p>
                <h3>2. Eficiencia en la transferencia de datos</h3>
                    <p>Se busca en este proceso que el rendimiento sea y gestión de dispositivos de E/S obtengan su máximo rendimiento posible, para que con ello se reduzca el tiempo que utiliza la CPU, memoria y todos los periféricos, para ello se cuida que el Buffering  no tenga problemas de almacenamiento o que tenga problemas de interrupciones para realizar su función adecuadamente, de la misma manera spooling se procura que la lista de trabajos que pudiese tener no tenga contratiempos ya que esto afectaría la función de control y administración de dispositivos y a su vez entonces el caching, no podría reutilizar los datos que se usaron para que se aceleren los accesos correspondientes.</p>
                <h3>3. Control y sincronización</h3>
                    <p>Esta operación es fundamental para el buen flujo de las comunicaciones de los programas con los dispositivos de entrada y salida ya que se encarga de que no exista conflictos y accesos simultáneos ya que afectarían su operatividad, para ello se implementa acciones de restricción, interrupciones y controladores para que ellos ayuden a garantizar que todo en los procesos se lleve adecuadamente en forma segura y ordenada.</p>
                <h3>4. Detección y manejo de errores</h3>
                    <p>Esta función es de suma importancia ya que ayuda a detectar a tiempo los posible errores entre los elementos físicos y los programas, así como todos los procesos de comunicación lógica que se lleven a cabo, para ello implementa lista de espera, procesos de planificación de dispositivos de entrada y salida y prioriza dependiendo de su nivel de asignación la ejecución del proceso.</p>
                <h3>5. Concurrencia y multitarea</h3>    
                    <p>Permite múltiples <strong>procesos en operaciones de E/S simultáneamente,</strong> sin interferir entre sí.</p>
                <h3>6. Seguridad y protección</h3>
                    <p>Se encarga de llevar a cabo procesos de seguridad que proteja el acceso a los dispositivos, garantizando que <strong>solo los procesos autorizados</strong> puedan utilizarlos.</p>
                <h3>7. Optimización del rendimiento global</h3>
                    <p>Su tarea es gestionar que la comunicación sea optima y que exista una adecuada distribución de recursos del sistema para esta función.</p>


            </div>
        </div>
        
        <!-- Sección 5.2.2 -->
        <div class="section" id="seccion-5-2-2">
            <div class="section-header">
                <div class="section-number">5.2.2</div>
                <div class="section-title">E/S Programadas</div>
            </div>
            <div class="content">
                <p>Método básico mediante el cual la <strong>CPU controla directamente las operaciones de E/S,</strong> supervisando cada transferencia de datos entre el dispositivo y la memoria principal.</p>

            </div>
        </div>
        
        <!-- Sección 5.2.3 -->
        <div class="section" id="seccion-5-2-3">
            <div class="section-header">
                <div class="section-number">5.2.3</div>
                <div class="section-title">E/S Manejadas por Interrupciones</div>
            </div>
            <div class="content">
                <p>Método que permite a la <strong>CPU continuar ejecutando otras tareas</strong> mientras los dispositivos de E/S realizan operaciones, interrumpiendo al procesador únicamente cuando  <strong>se requiere atención o cuando una transferencia ha finalizado.</strong></p>
            
            
            </div>
        </div>
        
        <!-- Sección 5.2.4 -->
        <div class="section" id="seccion-5-2-4">
            <div class="section-header">
                <div class="section-number">5.2.4</div>
                <div class="section-title">E/S usando DMA</div>
            </div>
            <div class="content">
                <p>Técnica avanzada que permite a los <strong>dispositivos de entrada/salida transferir datos directamente hacia o desde la memoria principal,</strong> sin la intervención continua de la CPU.</p>



            </div>

            <div class="section" id="video-material">
            <div class="section-header">
                <div class="section-number"><i class="fas fa-play-circle"></i></div>
                <div class="section-title">Material Audiovisual</div>
            </div>
            <div class="content">
                <p>Para reforzar los conocimientos sobre metodos de E/S consulta el siguiente video</p>
                
                <div class="figure-container">
                    <iframe width="100%" height="450" src="https://www.youtube.com/embed/g-bhPcGNRog" title="Métodos de Asignación de Espacio" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen="" style="border-radius: 5px; max-width: 100%;"></iframe>
                    <div class="figure-caption">Video: Métodos de Asignación de Espacio.</div>
                </div>
            </div>
        </div>
        
        </div>
        
        <!-- Actividad de Aprendizaje -->
        <div class="activity-card">
            <div class="activity-title">Actividad de Aprendizaje 2: Principios del Software de E/S</div>
            <p>Pon a prueba tus conocimientos sobre los objetivos y métodos del software de entrada y salida.</p>
            <a href="actividad_5_2.html" class="activity-btn">
                <i class="fas fa-pencil-alt"></i> Realizar Actividad
            </a>
        </div>
        
        <!-- Navegación -->
        <div class="nav-buttons">
            <a href="5.1.html" class="nav-btn"><i class="fas fa-arrow-left"></i> Volver a 5.1: Hardware de E/S</a>
            <a href="5.3.html" class="nav-btn">Continuar a 5.3: Capas de Software <i class="fas fa-arrow-right"></i></a>
        </div>
        
        <footer>
            <p>Sistemas Operativos - Unidad 5: Dispositivos de Entrada y Salida</p>
            <p>Desarrollado para fines educativos - © 2025 | Referencias: Tanenbaum & Bos (2015), Silberschatz et al. (2018), Stallings (2020)</p>
        </footer>
    </div>

    <script>
        // --- VARIABLES GLOBALES ---
        // Declara una variable para mantener el estado del menú lateral (abierto o cerrado).
        let sidebarOpen = false;

        // --- LÓGICA DEL MENÚ LATERAL (SIDEBAR) ---
        // Obtiene referencias a los elementos del DOM que se van a manipular.
        const menuToggle = document.getElementById('menuToggle'); // El botón de hamburguesa.
        const sidebarNav = document.getElementById('sidebarNav'); // El menú de navegación.
        const sidebarOverlay = document.getElementById('sidebarOverlay'); // El fondo oscuro.

        // Función para abrir o cerrar el menú lateral.
        function toggleSidebar() {
            // Invierte el valor booleano de sidebarOpen.
            sidebarOpen = !sidebarOpen;
            
            if (sidebarOpen) {
                // Si el menú se va a abrir:
                sidebarNav.classList.add('active'); // Muestra el menú añadiendo la clase 'active'.
                sidebarOverlay.classList.add('active'); // Muestra el fondo oscuro.
                menuToggle.classList.add('active'); // Cambia el estilo del botón.
                menuToggle.innerHTML = '<i class="fas fa-times"></i>'; // Cambia el ícono a una 'X'.
                document.body.style.overflow = 'hidden'; // Impide el scroll en el cuerpo de la página.
            } else {
                // Si el menú se va a cerrar:
                sidebarNav.classList.remove('active'); // Oculta el menú quitando la clase 'active'.
                sidebarOverlay.classList.remove('active'); // Oculta el fondo oscuro.
                menuToggle.classList.remove('active'); // Restaura el estilo del botón.
                menuToggle.innerHTML = '<i class="fas fa-bars"></i>'; // Restaura el ícono de hamburguesa.
                document.body.style.overflow = 'auto'; // Vuelve a permitir el scroll.
            }
            
            // Ajusta el espaciado del contenedor principal para que no quede debajo del menú.
            updateContainerSpacing();
        }

        // Asigna la función toggleSidebar al evento 'click' del botón y del fondo oscuro.
        menuToggle.addEventListener('click', toggleSidebar);
        sidebarOverlay.addEventListener('click', toggleSidebar);

        // Cierra el menú en dispositivos móviles cuando se hace clic en un enlace de navegación.
        document.querySelectorAll('.nav-item[data-section]').forEach(item => {
            item.addEventListener('click', () => {
                if (window.innerWidth <= 768) { // Si es una pantalla pequeña.
                    toggleSidebar(); // Cierra el menú.
                }
            });
        });

        // --- AJUSTE DINÁMICO DEL CONTENEDOR ---
        // Función que ajusta los márgenes del contenido principal dependiendo del tamaño de la ventana y si el menú está abierto.
        function updateContainerSpacing() {
            const container = document.querySelector('.container');
            
            if (window.innerWidth <= 768) {
                // En móviles, usa márgenes fijos y reducidos.
                container.style.marginLeft = '20px';
                container.style.marginRight = '20px';
                container.style.padding = '10px';
            } else if (sidebarOpen && window.innerWidth > 768) {
                // En escritorio con el menú abierto, añade un margen izquierdo grande.
                container.style.marginLeft = '370px'; // 280px del menú + 90px de espacio.
                container.style.marginRight = '90px';
                container.style.padding = '20px';
            } else {
                // En otros casos (escritorio, menú cerrado), usa márgenes normales.
                container.style.marginLeft = '90px';
                container.style.marginRight = '90px';
                container.style.padding = '20px';
            }
        }

        // --- RESALTADO DE SECCIÓN ACTIVA EN EL MENÚ (SCROLLSPY) ---
        // Función para detectar qué sección está visible y resaltar el enlace correspondiente en el menú.
        function updateActiveSection() {
            const sections = document.querySelectorAll('.section'); // Obtiene todas las secciones de contenido.
            const navItems = document.querySelectorAll('.nav-item[data-section]'); // Obtiene todos los enlaces del menú.
            
            let currentSection = '';
            
            // Itera sobre cada sección para ver su posición en la pantalla.
            sections.forEach(section => {
                const rect = section.getBoundingClientRect(); // Obtiene las coordenadas de la sección.
                // Si la sección está cerca de la parte superior de la ventana, se considera la actual.
                if (rect.top <= 150 && rect.bottom >= 150) {
                    currentSection = section.id.replace('seccion-', ''); // Extrae el identificador de la sección.
                    if (section.id === 'introduccion') {
                        currentSection = 'introduccion';
                    }
                }
            });
            
            // Itera sobre los enlaces del menú para aplicar la clase 'active'.
            navItems.forEach(item => {
                item.classList.remove('active'); // Quita la clase 'active' de todos los enlaces.
                if (item.dataset.section === currentSection) {
                    item.classList.add('active'); // Añade la clase 'active' solo al enlace de la sección actual.
                }
            });
        }

        // --- INDICADOR DE PROGRESO DE LECTURA ---
        // Función que actualiza la barra de progreso en la parte superior.
        function updateReadingProgress() {
            const winScroll = document.body.scrollTop || document.documentElement.scrollTop; // Cuánto se ha desplazado el usuario.
            const height = document.documentElement.scrollHeight - document.documentElement.clientHeight; // La altura total desplazable.
            const scrolled = (winScroll / height) * 100; // Calcula el porcentaje de desplazamiento.
            document.getElementById('progressBar').style.width = scrolled + '%'; // Asigna el porcentaje al ancho de la barra.
        }

        // --- BOTÓN DE "IR ARRIBA" ---
        const scrollToTopBtn = document.getElementById('scrollToTop');

        // Función para mostrar u ocultar el botón de "ir arriba".
        function toggleScrollToTopBtn() {
            if (window.pageYOffset > 300) { // Si el usuario ha bajado más de 300px.
                scrollToTopBtn.classList.add('visible'); // Muestra el botón.
            } else {
                scrollToTopBtn.classList.remove('visible'); // Oculta el botón.
            }
        }

        // Asigna un evento de clic al botón para que desplace la página al inicio suavemente.
        scrollToTopBtn.addEventListener('click', () => {
            window.scrollTo({
                top: 0,
                behavior: 'smooth' // Animación de desplazamiento suave.
            });
        });

        // --- EVENT LISTENERS PRINCIPALES ---
        // Se ejecutan cada vez que el usuario hace scroll.
        window.addEventListener('scroll', () => {
            updateActiveSection();
            updateReadingProgress();
            toggleScrollToTopBtn();
        });

        // --- DESPLAZAMIENTO SUAVE PARA ENLACES DE ANCLA ---
        // Mejora el comportamiento de los enlaces internos (ej: href="#seccion-1").
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault(); // Previene el comportamiento de salto por defecto.
                const target = document.querySelector(this.getAttribute('href')); // Encuentra el elemento de destino.
                
                if (target) {
                    const offsetTop = target.offsetTop - 100; // Calcula la posición con un margen de 100px desde arriba.
                    window.scrollTo({
                        top: offsetTop,
                        behavior: 'smooth' // Desplaza la ventana suavemente.
                    });
                }
            });
        });

        // Se ejecuta cuando se cambia el tamaño de la ventana.
        window.addEventListener('resize', () => {
            // Si el menú está abierto y la ventana se agranda a más de 768px, cierra el menú.
            if (window.innerWidth > 768 && sidebarOpen) {
                toggleSidebar();
            }
            // Reajusta el espaciado del contenedor.
            updateContainerSpacing();
        });

        // --- INICIALIZACIÓN ---
        // Se ejecuta cuando el contenido HTML de la página ha sido completamente cargado.
        document.addEventListener('DOMContentLoaded', function() {
            // Llama a las funciones de actualización para establecer el estado inicial correcto.
            updateActiveSection();
            updateReadingProgress();
            updateContainerSpacing();
            
            // En móviles, asegura que el menú empiece cerrado.
            if (window.innerWidth <= 768) {
                sidebarNav.classList.remove('active');
            }
        });

        // --- ATAJOS DE TECLADO ---
        document.addEventListener('keydown', (e) => {
            // Si se presiona la tecla 'Escape' y el menú está abierto, lo cierra.
            if (e.key === 'Escape' && sidebarOpen) {
                toggleSidebar();
            }
            
            // Si se presiona la tecla 'M', abre o cierra el menú.
            if (e.key === 'm' || e.key === 'M') {
                if (!e.ctrlKey && !e.altKey) { // Se asegura de que no se esté usando un modificador como Ctrl o Alt.
                    toggleSidebar();
                }
            }
        });
    </script>
</body>
</html>