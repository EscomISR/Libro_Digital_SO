<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>4.3 Métodos de Asignación - Sistema de Archivos</title>
    <link rel="icon" type="image/png" href="../IMAGENES/logoescom.png">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary: #2c3e50;
            --secondary: #3498db;
            --accent: #e74c3c;
            --light: #ecf0f1;
            --dark: #2c3e50;
            --gray: #95a5a6;
            --success: #2ecc71;
            --warning: #f39c12;
            --card-bg: rgba(255, 255, 255, 0.05);
        }
        
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; }
        body { background: linear-gradient(135deg, #1a2a3a, #2c3e50); color: var(--light); min-height: 100vh; line-height: 1.7; }

        .floating-home-btn { position: fixed; top: 20px; right: 20px; background: var(--secondary); color: white; width: 60px; height: 60px; border-radius: 50%; display: flex; align-items: center; justify-content: center; text-decoration: none; box-shadow: 0 4px 20px rgba(52, 152, 219, 0.3); transition: all 0.3s ease; z-index: 1000; font-size: 1.5rem; }
        .floating-home-btn:hover { background: #2980b9; transform: translateY(-3px); box-shadow: 6px 25px rgba(52, 152, 219, 0.4); }

        .sidebar-nav { position: fixed; left: 0; top: 0; width: 280px; height: 100vh; background: rgba(0, 0, 0, 0.9); backdrop-filter: blur(10px); border-right: 1px solid rgba(255, 255, 255, 0.1); z-index: 999; transition: transform 0.3s ease; transform: translateX(-100%); overflow-y: auto; }
        .sidebar-nav.active { transform: translateX(0); }
        .sidebar-header { padding: 20px; background: rgba(52, 152, 219, 0.1); border-bottom: 1px solid rgba(52, 152, 219, 0.3); }
        .sidebar-title { font-size: 1.2rem; color: var(--secondary); font-weight: 600; margin-bottom: 5px; }
        .sidebar-subtitle { font-size: 0.9rem; color: var(--gray); }
        .nav-sections { padding: 20px 0; }
        .nav-section { margin-bottom: 15px; }
        .nav-section-title { padding: 10px 20px; font-size: 1rem; font-weight: 600; color: var(--secondary); border-bottom: 1px solid rgba(52, 152, 219, 0.2); margin-bottom: 10px; }
        .nav-item { display: block; padding: 12px 20px; color: var(--light); text-decoration: none; transition: all 0.3s ease; border-left: 3px solid transparent; }
        .nav-item:hover { background: rgba(52, 152, 219, 0.1); border-left-color: var(--secondary); padding-left: 25px; }
        .nav-item.active { background: rgba(52, 152, 219, 0.2); border-left-color: var(--secondary); color: var(--secondary); }
        .nav-item i { margin-right: 10px; width: 20px; text-align: center; }

        .menu-toggle { position: fixed; top: 20px; left: 20px; background: var(--primary); color: white; width: 50px; height: 50px; border-radius: 8px; border: none; cursor: pointer; display: flex; align-items: center; justify-content: center; box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3); transition: all 0.3s ease; z-index: 1001; font-size: 1.2rem; }
        .menu-toggle:hover { background: var(--secondary); transform: translateY(-2px); }
        .menu-toggle.active { background: var(--accent); }

        .reading-progress { position: fixed; top: 0; left: 0; width: 100%; height: 4px; background: rgba(255, 255, 255, 0.1); z-index: 998; }
        .reading-progress-bar { height: 100%; background: linear-gradient(90deg, var(--secondary), var(--success)); width: 0%; transition: width 0.1s ease; }
        .sidebar-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.5); z-index: 998; opacity: 0; visibility: hidden; transition: all 0.3s ease; }
        .sidebar-overlay.active { opacity: 1; visibility: visible; }
        
        .container { max-width: 1200px; margin: 0 auto; padding: 20px; transition: margin-left 0.3s ease, margin-right 0.3s ease; }
        
        header { text-align: center; padding: 40px 20px; margin-bottom: 30px; background: rgba(0, 0, 0, 0.3); border-radius: 15px; position: relative; overflow: hidden; }
        .breadcrumb { display: flex; justify-content: center; margin-bottom: 20px; color: var(--gray); font-size: 1.1rem; }
        .breadcrumb a { color: var(--secondary); text-decoration: none; transition: color 0.3s; }
        .breadcrumb a:hover { color: white; text-decoration: underline; }
        .breadcrumb span { margin: 0 10px; }
        h1 { font-size: 2.8rem; margin-bottom: 10px; color: white; }
        .subtitle { font-size: 1.8rem; color: var(--secondary); margin-bottom: 20px; font-weight: 300; text-align: center; }
        
        .intro { max-width: 900px; margin: 0 auto 40px; padding: 25px; background: var(--card-bg); border-radius: 15px; border-left: 4px solid var(--secondary); text-align: justify; }
        
        .section { background: var(--card-bg); border-radius: 15px; padding: 30px; margin-bottom: 40px; box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2); scroll-margin-top: 100px; }
        .section-header { display: flex; align-items: center; margin-bottom: 25px; padding-bottom: 15px; border-bottom: 2px solid var(--secondary); }
        .section-number { font-size: 2.2rem; font-weight: bold; color: var(--secondary); margin-right: 15px; min-width: 120px; }
        .section-title { font-size: 1.8rem; font-weight: 600; color: white; }
        
        .content { padding: 0 10px; }
        .content h3 { font-size: 1.5rem; color: var(--secondary); margin: 30px 0 15px; padding-left: 10px; border-left: 3px solid var(--accent); }
        .content h4 { font-size: 1.3rem; color: var(--warning); margin: 25px 0 12px; padding-left: 8px; }
        .content p { margin-bottom: 15px; text-align: justify; }
        .content ul, .content ol { padding-left: 30px; margin: 20px 0; }
        .content li { margin-bottom: 12px; }
        
        .citation { font-style: italic; color: var(--gray); margin: 5px 0 15px 20px; border-left: 2px solid var(--secondary); padding-left: 10px; }
        .quote-box { background: rgba(52, 152, 219, 0.1); border-left: 4px solid var(--secondary); padding: 20px; margin: 25px 0; border-radius: 8px; font-style: italic; color: var(--light); }
        .quote-box .citation { border-left: none; margin: 10px 0 0 0; padding-left: 0; }
        
        .figure-container { text-align: center; margin: 30px 0; padding: 20px; background: rgba(0, 0, 0, 0.2); border-radius: 10px; }
        .figure-caption { color: var(--gray); margin-top: 10px; }
        .figure-container img { max-width: 100%; border-radius: 5px; }

        .nav-buttons { display: flex; justify-content: space-between; margin-top: 40px; }
        .nav-btn { display: inline-flex; align-items: center; background: var(--secondary); color: white; padding: 12px 25px; border-radius: 30px; text-decoration: none; font-weight: 600; transition: all 0.3s ease; }
        .nav-btn:hover { background: #2980b9; transform: translateY(-3px); }
        .nav-btn i { margin: 0 8px; }
        
        footer { text-align: center; margin-top: 60px; padding: 30px; color: var(--gray); font-size: 0.9rem; border-top: 1px solid rgba(255, 255, 255, 0.1); }
        .scroll-to-top { position: fixed; bottom: 20px; right: 20px; background: var(--accent); color: white; width: 50px; height: 50px; border-radius: 50%; border: none; cursor: pointer; display: flex; align-items: center; justify-content: center; box-shadow: 0 4px 15px rgba(231, 76, 60, 0.3); transition: all 0.3s ease; opacity: 0; visibility: hidden; z-index: 999; }
        .scroll-to-top.visible { opacity: 1; visibility: visible; }
        .scroll-to-top:hover { background: #c0392b; transform: translateY(-3px); }

        /* Estilos para la Activity Card */
        .activity-card {
            background: rgba(46, 204, 113, 0.1); /* Fondo verde translúcido */
            border-radius: 15px;
            padding: 30px;
            margin: 40px 0;
            border-left: 4px solid var(--success); /* Borde izquierdo verde */
            text-align: center;
        }
        
        .activity-title {
            font-size: 1.8rem;
            color: var(--success);
            margin-bottom: 20px;
        }
        
        .activity-btn {
            display: inline-block;
            background: var(--success);
            color: white;
            padding: 15px 35px;
            border-radius: 30px;
            text-decoration: none;
            font-weight: 600;
            margin-top: 15px;
            transition: all 0.3s ease;
            font-size: 1.1rem;
        }
        
        .activity-btn:hover {
            background: #27ae60; /* Verde más oscuro al pasar el mouse */
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(46, 204, 113, 0.4);
        }

        @media (max-width: 768px) {
            .sidebar-nav { width: 100%; }
            h1 { font-size: 2rem; }
            .subtitle { font-size: 1.4rem; }
            .section-title { font-size: 1.5rem; }
            .section-number { min-width: 100px; font-size: 1.8rem; }
            .nav-buttons { flex-direction: column; gap: 15px; }
            .nav-btn { width: 100%; text-align: center; justify-content: center; }
            .floating-home-btn { width: 50px; height: 50px; font-size: 1.2rem; }
        }
    </style>
</head>
<body>
    <div class="reading-progress"><div class="reading-progress-bar" id="progressBar"></div></div>
    <button class="menu-toggle" id="menuToggle"><i class="fas fa-bars"></i></button>
    <a href="index.html" class="floating-home-btn" title="Ir al índice"><i class="fas fa-home"></i></a>
    <div class="sidebar-overlay" id="sidebarOverlay"></div>

    <nav class="sidebar-nav" id="sidebarNav">
        <div class="sidebar-header">
            <div class="sidebar-title">4.3 Asignación de Espacio</div>
            <div class="sidebar-subtitle">Sistema de Archivos</div>
        </div>
        <div class="nav-sections">
            <div class="nav-section">
                <div class="nav-section-title">Navegación</div>
                <a href="4.2.html" class="nav-item"><i class="fas fa-arrow-left"></i> Anterior: 4.2 Implementación</a>
                <a href="4.0.html" class="nav-item"><i class="fas fa-list"></i> Menú Unidad 4</a>
            </div>
            <div class="nav-section">
                <div class="nav-section-title">Contenido</div>
                <a href="#seccion-4-3" class="nav-item" data-section="4-3"><i class="fas fa-th-large"></i> 4.3 Generalidades</a>
                <a href="#seccion-4-3-1" class="nav-item" data-section="4-3-1"><i class="fas fa-bars"></i> 4.3.1 Contigua</a>
                <a href="#seccion-4-3-2" class="nav-item" data-section="4-3-2"><i class="fas fa-link"></i> 4.3.2 Ligada</a>
                <a href="#seccion-4-3-3" class="nav-item" data-section="4-3-3"><i class="fas fa-list-ol"></i> 4.3.3 Indexada</a>
                <a href="#seccion-4-3-4" class="nav-item" data-section="4-3-4"><i class="fas fa-hdd"></i> 4.3.4 Admin de Espacio</a>
            </div>
            <div class="nav-section">
                <div class="nav-section-title">Recursos</div>
                <a href="4.4.html" class="nav-item"><i class="fas fa-arrow-right"></i> Siguiente: Estructurados</a>
            </div>
        </div>
    </nav>

    <button class="scroll-to-top" id="scrollToTop"><i class="fas fa-chevron-up"></i></button>

    <div class="container">
        <header id="inicio">
            <div class="breadcrumb">
                <a href="https://escomisr.github.io/Libro_Digital_SO/index.html"><i class="fas fa-home"></i> Inicio</a>
                <span>/</span>
                <a href="4.0.html">Unidad 4</a>
                <span>/</span>
                <span>4.3 Métodos de Asignación</span>
            </div>
            <h1>4.3 Métodos de asignación de espacio</h1>
            <div class="subtitle">Gestión del Almacenamiento</div>
        </header>
        
        <div class="intro">
            <div class="quote-box">
                "Según Tanenbaum (2015), los directorios son componentes fundamentales del sistema de archivos, ya que proporcionan la estructura jerárquica que permite al sistema operativo organizar, localizar y administrar los archivos almacenados en los dispositivos, funciona como un dispositivo de almacenamiento lógico, organizando archivos y subdirectorios, lo que simplifica la administración de permisos y permite un acceso más eficiente a la información."
            </div>
        </div>
        
        <div class="section" id="seccion-4-3">
            <div class="section-header">
                <div class="section-number">4.3</div>
                <div class="section-title">Generalidades</div>
            </div>
            <div class="content">
                <p>Ahora bien, los directorios establecen niveles para que los archivos, puedan registrar información como es el nombre, ubicaciones, atributos y fechas, con el propósito de establecer políticas de seguridad en carpetas y contenidos</p>
                <p>Es importante destacar que un archivo contiene sus registros con el nombre y referencia física dentro de los subdirectorios en los cuales se tienen atributos, que ayudaran a optimizar el acceso para que el sistema mantenga una memoria estructuras en la cual existan tablas de directorios abiertos y cachés que aceleran la búsqueda, estas son conocidas como bitácoras que establecen un control especifico y desarrollan un bloqueo de directorios, lo que garantizar la integridad y seguridad de los datos ante accesos sincrónico que pueda tener el sistema.</p>
            </div>
            <div class="figure-container">
                    <div class="figure-caption">Figura 31</div>
                    <div class="figure-caption">Estructura y funciones de los directorios en el sistema operativo</div>
                    <img src="FIGURA31.png" alt="Estructura y funciones de los directorios en el sistema operativo">
                    <div class="figure-caption">Nota: Adaptado de Sistemas Operativos Modernos  (4.ª ed.) por Andrew S. Tanenbaum y Herbert Bos, 2015; Pearson Educación.</div>
                </div>
        </div>
        
        <div class="section" id="seccion-4-3-1">
            <div class="section-header">
                <div class="section-number">4.3.1</div>
                <div class="section-title">Contigua</div>
            </div>
            <div class="content">
                <p>Según Tanenbaum (2015), Es cuando se guardan archivos en bloques en forma consecutiva generando una lista en todos los dispositivos de almacenamiento, por lo que cada uno de estos procesos tendrá un registro, dirección y longitud total del archivo.</p>
                <p>Por lo que este procedimiento ayudara a que el acceso sea inmediato a los datos, siendo especialmente eficiente para archivos grandes o que se leen de forma secuencial.</p>
                <p>Unas desventajas que se presenta es la fragmentación, que ocurre cuando el espacio libre se divide en bloques no contiguos y dificulta ampliar a los archivos y esto provoca que no exista espacio disponible para el bloque inicial.</p>
                <p>Por ello, este tipo de asignación se utiliza principalmente en sistemas donde los archivos son estáticos o de tamaño conocido, como bases de datos fijas o archivos multimedia.</p>
                
                <h4>Características de la asignación contigua:</h4>
                <ul>
                    <li>Gestión del sistema de archivos y acceso inmediato a los datos.</li>
                    <li>Implementación simple y eficiente de los archivos.</li>
                    <li>Fragmentación de memoria: situación en la que existe suficiente memoria libre, pero está repartida en pequeños bloques dispersos y no contiguos.</li>
                    <li>Acceso secuencial: método de lectura o escritura de información ubicado en bases de datos o archivos multimedia, siguiendo un orden lineal.</li>
                </ul>

                <div class="figure-container">
                    <div class="figure-caption">Figura 32</div>
                    <div class="figure-caption">Asignación contigua de archivos en el sistema operativo</div>
                    <img src="FIGURA32.png" alt="Asignación contigua">
                    <div class="figure-caption">Nota: Adaptado de Sistemas operativos modernos (4.ª ed.) por Andrew S. Tanenbaum y Herbert Bos, 2015; Pearson Educación.</div>
                </div>
            </div>
        </div>

        <div class="section" id="seccion-4-3-2">
            <div class="section-header">
                <div class="section-number">4.3.2</div>
                <div class="section-title">Ligada</div>
            </div>
            <div class="content">
                <p>Según Tanenbaum (2015), es una técnica de administración del espacio en disco donde los bloques de un archivo no se almacenan de forma contigua, sino que cada bloque contiene un puntero al siguiente.</p>
                <p>Este procedimiento guarda la dirección del primer bloque, y a través de los punteros puede recorrer el archivo completo hasta su fin.</p>
                <p>La flexibilidad en el uso del espacio libre permite eliminar la necesidad de áreas contiguas y evita la fragmentación externa.</p>
                
                <div class="figure-container">
                    <div class="figure-caption">Figura 33</div>
                    <div class="figure-caption">Asignación ligada de archivos en el sistema operativo</div>
                    <img src="FIGURA33.png" alt="Asignación ligada">
                    <div class="figure-caption">Nota: Adaptado de Sistemas operativos modernos (4.ª ed.) por Andrew S. Tanenbaum y Herbert Bos, 2015; Pearson Educación.</div>
                </div>
            </div>
        </div>

        <div class="section" id="seccion-4-3-3">
            <div class="section-header">
                <div class="section-number">4.3.3</div>
                <div class="section-title">Indexada</div>
            </div>
            <div class="content">
                <p>El método de asignación de archivos descrito por Tanenbaum y Bos (2015), se basa en que cada archivo tiene un bloque especial dedicado a él, conocido como tabla de índice o inodo (en muchos sistemas).</p>
                <p>Este bloque no guarda el contenido del archivo, sino que contiene una tabla de punteros; cada puntero indica la dirección exacta en el disco donde se encuentra un bloque de datos real del archivo.</p>
                <p>La ventaja principal de esta estructura es que facilita el acceso directo a cualquier sección del archivo.</p>
                <p>A diferencia de los métodos de asignación secuencial, como la enlazada —que requiere recorrer una serie de punteros—, este sistema permite al sistema operativo acceder directamente al bloque de datos deseado mediante la información almacenada en una tabla de índices.</p>
                <p>Esto mejora significativamente la velocidad de lectura y escritura al disminuir el tiempo de búsqueda de la información.</p>
                <p>Asimismo, este método soluciona varias limitaciones de otros sistemas, ya que evita la fragmentación externa y posibilita que los archivos se amplíen dinámicamente.</p>
                <p>Por lo que los bloques no requieren ubicarse en el disco ya que en cualquier espacio que lo vean disponible lo pueden tomar lo que ayuda al sistema operativo para el almacenamiento de esto.</p>

                <div class="figure-container">
                    <div class="figure-caption">Figura 34</div>
                    <div class="figure-caption">Asignación indexada de archivos en el sistema operativo</div>
                    <img src="FIGURA34.png" alt="Asignación indexada">
                    <div class="figure-caption">Nota: Adaptado de Sistemas operativos modernos (4.ª ed.) por Andrew S. Tanenbaum y Herbert Bos, 2015; Pearson Educación.</div>
                </div>
            </div>
        </div>

        <div class="section" id="seccion-4-3-4">
            <div class="section-header">
                <div class="section-number">4.3.4</div>
                <div class="section-title">Administración de espacio en disco</div>
            </div>
            <div class="content">
                <p>De acuerdo con Tanenbaum y Bos (2015), tiene la tarea de encargarse de asignar, controlar y liberar todos los bloques del disco conde se almacenan los archivos y en su caso los directorios, para que esto suceda el sistema operativo debe de estar visualizado su funcionamiento de los discos para reservar ellos y poder asignar tareas específicas, esto evitara problemas de acceso y ayudara a la optimización del espacio para almacenamiento.</p>
                <p>Para obtener que la administración realmente genere espacio existe el mapa de bits en el que cada bloque del disco asigna un valor binario el cual avisa si está ocupado o desocupado el espacio, así mismo existe la lista enlazada en donde los bloques que estén libres se vinculan entre ellos formando una cadena de espacios disponibles y esto beneficia al sistema operativo para la asignación de espacios.</p>

                <div class="figure-container">
                    <div class="figure-caption">Figura 35</div>
                    <div class="figure-caption">Administración de espacio en disco en el sistema operativo</div>
                    <img src="FIGURA35.png" alt="Administración de espacio en disco">
                    <div class="figure-caption">Nota: Adaptado de Sistemas operativos modernos (4.ª ed.) por Andrew S. Tanenbaum y Herbert Bos, 2015; Pearson Educación.</div>
                </div>
            </div>
        </div>
        
        <div class="section" id="video-material">
            <div class="section-header">
                <div class="section-number"><i class="fas fa-play-circle"></i></div>
                <div class="section-title">Material Audiovisual</div>
            </div>
            <div class="content">
                <p>Para reforzar los conocimientos sobre los métodos de asignación de espacio (Contigua, Ligada e Indexada), consulta el siguiente recurso explicativo:</p>
                
                <div class="figure-container">
                    <iframe width="100%" height="450" src="https://www.youtube.com/embed/g-bhPcGNRog" title="Métodos de Asignación de Espacio" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen style="border-radius: 5px; max-width: 100%;"></iframe>
                    <div class="figure-caption">Salas, I. (2024, 10 de noviembre). <em>Métodos de asignación de espacio</em> [Video]. YouTube. https://www.youtube.com/watch?v=g-bhPcGNRog</div>
                </div>
            </div>
        </div>

        <div class="activity-card">
            <div class="activity-title">Actividad de Aprendizaje 4.3: Métodos de Asignación</div>
            <p>Pon a prueba tus conocimientos sobre los métodos de asignación contigua, ligada e indexada, y la administración de espacio en disco.</p>
            <a href="Actividad_4_3.html" class="activity-btn">
                <i class="fas fa-pencil-alt"></i> Realizar Actividad
            </a>
        </div>

        <div class="nav-buttons">
            <a href="4.2.html" class="nav-btn"><i class="fas fa-arrow-left"></i> Anterior: 4.2 Implementación</a>
            <a href="4.4.html" class="nav-btn">Continuar a 4.4: Estructurados <i class="fas fa-arrow-right"></i></a>
        </div>
        
        <footer>
            <p>Sistemas Operativos - Unidad 4: Sistema de Archivos</p>
            <p>Desarrollado para fines educativos - © 2025</p>
        </footer>
    </div>

    <script>
        let sidebarOpen = false;
        const menuToggle = document.getElementById('menuToggle');
        const sidebarNav = document.getElementById('sidebarNav');
        const sidebarOverlay = document.getElementById('sidebarOverlay');
        function toggleSidebar() { sidebarOpen = !sidebarOpen; if (sidebarOpen) { sidebarNav.classList.add('active'); sidebarOverlay.classList.add('active'); menuToggle.classList.add('active'); menuToggle.innerHTML = '<i class="fas fa-times"></i>'; document.body.style.overflow = 'hidden'; } else { sidebarNav.classList.remove('active'); sidebarOverlay.classList.remove('active'); menuToggle.classList.remove('active'); menuToggle.innerHTML = '<i class="fas fa-bars"></i>'; document.body.style.overflow = 'auto'; } updateContainerSpacing(); }
        menuToggle.addEventListener('click', toggleSidebar); sidebarOverlay.addEventListener('click', toggleSidebar);
        document.querySelectorAll('.nav-item[data-section]').forEach(item => { item.addEventListener('click', () => { if (window.innerWidth <= 768) { toggleSidebar(); } }); });
        function updateContainerSpacing() { const container = document.querySelector('.container'); if (window.innerWidth <= 768) { container.style.marginLeft = '20px'; container.style.marginRight = '20px'; container.style.padding = '10px'; } else if (sidebarOpen && window.innerWidth > 768) { container.style.marginLeft = '370px'; container.style.marginRight = '90px'; container.style.padding = '20px'; } else { container.style.marginLeft = '90px'; container.style.marginRight = '90px'; container.style.padding = '20px'; } }
        function updateActiveSection() { const sections = document.querySelectorAll('.section'); const navItems = document.querySelectorAll('.nav-item[data-section]'); let currentSectionId = ''; sections.forEach(section => { const rect = section.getBoundingClientRect(); if (rect.top <= 150 && rect.bottom >= 150) { currentSectionId = section.id; } }); navItems.forEach(item => { const sectionId = 'seccion-' + item.dataset.section; if (sectionId === currentSectionId) { item.classList.add('active'); } else { item.classList.remove('active'); } }); }
        function updateReadingProgress() { const winScroll = document.body.scrollTop || document.documentElement.scrollTop; const height = document.documentElement.scrollHeight - document.documentElement.clientHeight; const scrolled = (winScroll / height) * 100; document.getElementById('progressBar').style.width = scrolled + '%'; }
        const scrollToTopBtn = document.getElementById('scrollToTop'); function toggleScrollToTopBtn() { if (window.pageYOffset > 300) { scrollToTopBtn.classList.add('visible'); } else { scrollToTopBtn.classList.remove('visible'); } } scrollToTopBtn.addEventListener('click', () => { window.scrollTo({ top: 0, behavior: 'smooth' }); });
        window.addEventListener('scroll', () => { updateActiveSection(); updateReadingProgress(); toggleScrollToTopBtn(); });
        document.querySelectorAll('a[href^="#"]').forEach(anchor => { anchor.addEventListener('click', function (e) { e.preventDefault(); const target = document.querySelector(this.getAttribute('href')); if (target) { const offsetTop = target.offsetTop - 100; window.scrollTo({ top: offsetTop, behavior: 'smooth' }); } }); });
        window.addEventListener('resize', () => { if (window.innerWidth > 768 && sidebarOpen) { toggleSidebar(); } updateContainerSpacing(); });
        document.addEventListener('DOMContentLoaded', function() { updateActiveSection(); updateReadingProgress(); updateContainerSpacing(); if (window.innerWidth <= 768) { sidebarNav.classList.remove('active'); } });
        document.addEventListener('keydown', (e) => { if (e.key === 'Escape' && sidebarOpen) { toggleSidebar(); } });
    </script>
</body>
</html>
